<template>
  <transition :name="tipShowWay">
    <div class="tip-box" 
    :class="[starTip]" 
    :style="`width: ${tipWidth}`"
    >
      <span class="tip-text">{{text}}</span>
    </div>
  </transition>
</template>

<script>
export default {
  name: 'TipR',
  props: {
      text: {
        type: String,
        default: 'Click me'
      },
      borderColor: {
        type: String,
        default: 'rgb(228, 159, 171)'
      },
      starTip: {
        type: String,
        default: 'design-star-tip'
      },
      tipShowWay: {
        type: String,
        default: 'design-show'
      },
      tipWidth: String
  },
  data() {
    return {
      show: true
    }
  },
  methods: {
    //ÊñáÂ≠óÂØπËØùÁöÑ,ÂÖàÊîæËøôÈáå,Âõ†‰∏∫‰∏çÁî®‰∫Ü
    starClick(starNumber,clickStar) {
          console.log(this.starryCurrent);
          
            clearTimeout(this.timer1)//Ê∏ÖÈô§2‰∏™ÂÆöÊó∂Âô®
            clearTimeout(this.timer2)

          //ÊØè‰∏ÄÊ¨°Êñ∞ÁöÑÁÇπÂáªÈÉΩÊää‰ªñ‰ª¨ÁªôfalseÊéâ
              this.designShow = false
              this.backShow = false
              this.frontShow = false
          if(this.starryCurrent === starNumber) {
              this.clickTimes = 0 //ËøõÂÖ•‰∏ã‰∏Ä‰∏™Áä∂ÊÄÅ ÁÇπÂáªÊ¨°Êï∞Ê∏ÖÈõ∂
              clearTimeout(this.timer1)
              clearTimeout(this.timer2)
              this.starryNext()
          }else if (this.starryCurrent === 2) { //2Áä∂ÊÄÅÊòØËÆæËÆ°ÁöÑÁä∂ÊÄÅ
              if(clickStar == 'back' || clickStar == 'front') {
                  if(this.clickTimes === 0) {//ËøòÊ≤°ÊúâÁÇπÂáªËøá,ËøôÊòØÁ¨¨‰∏ÄÊ¨°ÁÇπÂáª
                    this.clickTimes++
                    this.designText = 'ÂÖàÁÇπÊàë,ÊàëÊâçÊòØËÄÅÂ§ß'
                    this.designWidth = '10ch'
                    this.designShow = true
                    this.timer1 = setTimeout(()=>{
                        this.backText = 'Áï•Áï•Áï•Áï•Áï•üòú'
                        this.backShow = true
                        this.designShow = false
                    },2500) //ÂÆö‰πâ3ÁßíÂêéÊâßË°å 1ÁßíÊòæÁ§∫ 1ÁßíÈÄÄÂá∫ 1ÁßíÂ±ïÁ§∫
                    this.timer2 = setTimeout(()=>{
                        this.frontText = '.....'
                        this.frontShow = true
                        this.backShow = false
                    },5000)
                    this.timer1 = setTimeout(()=>{
                        console.log('frontnoshow');
                        this.frontShow = false
                    },7000) //ÂÆö‰πâ3ÁßíÂêéÊâßË°å 1ÁßíÊòæÁ§∫ 1ÁßíÈÄÄÂá∫ 1ÁßíÂ±ïÁ§∫
                  } else if (this.clickTimes >= 1){ //Â∑≤ÁªèÁÇπËøáËá≥Â∞ë‰∏ÄÊ¨°‰∫Ü
                    this.designText = 'üò†'
                    this.designWidth = '6ch'
                    this.designShow = true
                    this.timer1 = setTimeout(()=>{
                        this.designShow = false
                    },2500) //ÂÆö‰πâ3ÁßíÂêéÊâßË°å 1ÁßíÊòæÁ§∫ 1ÁßíÈÄÄÂá∫ 1ÁßíÂ±ïÁ§∫
                  }
              }
          } else if (this.starryCurrent === 3 ){ //ÂêéÂè∞ÁöÑÁä∂ÊÄÅ
              if(clickStar == 'design') {
                  if(this.clickTimes === 0) {//ËøòÊ≤°ÊúâÁÇπÂáªËøá,ËøôÊòØÁ¨¨‰∏ÄÊ¨°ÁÇπÂáª
                    this.clickTimes++
                    this.backText = 'Âπ≤Âòõ?Âà∞Êàë‰∫ÜÂïä'
                    this.backShow = true
                    this.timer1 = setTimeout(()=>{
                        this.designText = 'ÂìàÂìà'
                        this.designWidth = '6ch'
                        this.designShow = true
                        this.backShow = false
                    },2500) //ÂÆö‰πâ3ÁßíÂêéÊâßË°å 1ÁßíÊòæÁ§∫ 1ÁßíÈÄÄÂá∫ 1ÁßíÂ±ïÁ§∫
                    this.timer2 = setTimeout(()=>{
                        this.designShow = false
                        clearTimeout(this.timer1)
                    },5000)
                  } else if (this.clickTimes >= 1){ //Â∑≤ÁªèÁÇπËøáËá≥Â∞ë‰∏ÄÊ¨°‰∫Ü
                    this.designText = 'üòò'
                    this.designWidth = '6ch'
                    this.designShow = true
                    this.timer1 = setTimeout(()=>{
                        this.backText = 'ËØ∑ÁªôÊàë‰∏™Èù¢Â≠ê'
                        this.backShow = true
                        this.designShow = false
                    },2500) //ÂÆö‰πâ3ÁßíÂêéÊâßË°å 1ÁßíÊòæÁ§∫ 1ÁßíÈÄÄÂá∫ 1ÁßíÂ±ïÁ§∫
                    this.timer2 = setTimeout(()=>{
                        this.backShow = false
                        clearTimeout(this.timer1)
                    },5000)
                  }
              } else if (clickStar == 'front') {
                  if(this.clickTimes === 0) {//ËøòÊ≤°ÊúâÁÇπÂáªËøá,ËøôÊòØÁ¨¨‰∏ÄÊ¨°ÁÇπÂáª
                    this.clickTimes++
                    this.backText = 'Âπ≤Âòõ?Âà∞Êàë‰∫ÜÂïä'
                    this.backShow = true
                    this.timer1 = setTimeout(()=>{
                        this.frontText = 'ÂòªÂòª'
                        this.frontShow = true
                        this.backShow = false
                    },2500) //ÂÆö‰πâ3ÁßíÂêéÊâßË°å 1ÁßíÊòæÁ§∫ 1ÁßíÈÄÄÂá∫ 1ÁßíÂ±ïÁ§∫
                    this.timer2 = setTimeout(()=>{
                        this.frontShow = false
                        clearTimeout(this.timer1)
                    },5000)
                  } else if (this.clickTimes >= 1){ //Â∑≤ÁªèÁÇπËøáËá≥Â∞ë‰∏ÄÊ¨°‰∫Ü
                    this.frontText = 'üòò'
                    this.frontShow = true
                    this.timer1 = setTimeout(()=>{
                        this.backText = 'ËØ∑ÁªôÊàë‰∏™Èù¢Â≠ê'
                        this.backShow = true
                        this.frontShow = false
                    },2500) //ÂÆö‰πâ3ÁßíÂêéÊâßË°å 1ÁßíÊòæÁ§∫ 1ÁßíÈÄÄÂá∫ 1ÁßíÂ±ïÁ§∫
                    this.timer2 = setTimeout(()=>{
                        this.backShow = false
                        clearTimeout(this.timer1)
                    },5000)
                  }
              }
          } else if (this.starryCurrent === 4 ) {//ÂâçÁ´ØÁöÑÁä∂ÊÄÅ
              if(clickStar == 'design') {
                  if(this.clickTimes === 0) {//ËøòÊ≤°ÊúâÁÇπÂáªËøá,ËøôÊòØÁ¨¨‰∏ÄÊ¨°ÁÇπÂáª
                    this.clickTimes++
                    this.designText = 'üò≥'
                    this.designWidth = '6ch'
                    this.designShow = true
                    this.timer1 = setTimeout(()=>{
                        this.frontText = 'ÂòøÂòø'
                        this.frontShow = true
                        this.designShow = false
                    },2500) //ÂÆö‰πâ3ÁßíÂêéÊâßË°å 1ÁßíÊòæÁ§∫ 1ÁßíÈÄÄÂá∫ 1ÁßíÂ±ïÁ§∫
                    this.timer2 = setTimeout(()=>{
                        this.frontShow = false
                        clearTimeout(this.timer1)
                    },5000)
                  } else if (this.clickTimes >= 1){ //Â∑≤ÁªèÁÇπËøáËá≥Â∞ë‰∏ÄÊ¨°‰∫Ü
                    this.designText = 'i‰∫Üi‰∫Ü'
                    this.designWidth = '6ch'
                    this.designShow = true
                    this.timer1 = setTimeout(()=>{
                        this.frontText = 'üò≠'
                        this.frontShow = true
                        this.designShow = false
                    },2500) //ÂÆö‰πâ3ÁßíÂêéÊâßË°å 1ÁßíÊòæÁ§∫ 1ÁßíÈÄÄÂá∫ 1ÁßíÂ±ïÁ§∫
                    this.timer2 = setTimeout(()=>{
                        this.frontShow = false
                        clearTimeout(this.timer1)
                    },5000)
                  }
              } else if (clickStar == 'back') {
                  if(this.clickTimes === 0) {//ËøòÊ≤°ÊúâÁÇπÂáªËøá,ËøôÊòØÁ¨¨‰∏ÄÊ¨°ÁÇπÂáª
                    this.clickTimes++
                    this.backText = 'üò≤'
                    this.backShow = true
                    this.timer1 = setTimeout(()=>{
                        this.frontText = 'ÂòøÂòø'
                        this.frontShow = true
                        this.backShow = false
                    },2500) //ÂÆö‰πâ3ÁßíÂêéÊâßË°å 1ÁßíÊòæÁ§∫ 1ÁßíÈÄÄÂá∫ 1ÁßíÂ±ïÁ§∫
                    this.timer2 = setTimeout(()=>{
                        this.frontShow = false
                        clearTimeout(this.timer1)
                    },5000)
                  } else if (this.clickTimes >= 1){ //Â∑≤ÁªèÁÇπËøáËá≥Â∞ë‰∏ÄÊ¨°‰∫Ü
                    this.backText = 'i‰∫Üi‰∫Ü'
                    this.backShow = true
                    this.timer1 = setTimeout(()=>{
                        this.frontText = 'üò≠'
                        this.frontShow = true
                        this.backShow = false
                    },2500) //ÂÆö‰πâ3ÁßíÂêéÊâßË°å 1ÁßíÊòæÁ§∫ 1ÁßíÈÄÄÂá∫ 1ÁßíÂ±ïÁ§∫
                    this.timer2 = setTimeout(()=>{
                        this.frontShow = false
                        clearTimeout(this.timer1)
                    },5000)
                  }
              }
          } else if(this.starryCurrent >= 5) { //5Áä∂ÊÄÅÂèä‰ª•Âêé

          }
      },
      showTip () {
          if( this.starryCurrent === 2) {
            this.designText = 'Click me'
            this.designWidth = '10ch'
            this.designShow = true
            this.timer1 = setTimeout(()=>{
                this.designShow = false
                this.backText = 'ÂÖàÁÇπÊàë,ÂÖàÁÇπÊàë'
                this.backShow = true
            },1800)
            this.timer2 = setTimeout(()=>{
                this.backShow = false
                this.frontText = '.....'
                this.frontShow = true
            },3600)
            this.timer1 = setTimeout(()=>{
                this.frontShow = false
            },5000)
          }
      }
  },
}
</script>

<style scoped>
  
.tip-box {
  text-align: center;
  font-size: 14px;
  /* word-wrap: break-word; */
  /* line-height: 100%; */
  background: white;
  border-radius: 10px;
  position: absolute;
}
.tip-text {
  display: inline-block;
  padding: 8px 8px;
  position: relative;
  border-bottom: 1px solid white;
  border-top: none;
  border-radius: 13px;
  z-index: 2;
}

/* ËÆæËÆ° */ 

.design-star-tip{
  width: 10ch;
  top: -70px;
  right: 75px;
  border: 2px solid rgb(228, 159, 171);
  transform: rotateZ(-20deg);
  transform-origin: center 70px;
  animation: jump-design 1s ease infinite 1s;
}
.design-star-tip::before {
  content: '';
  width: 20px;
  height: 20px;
  background: white;
  position: absolute;
  transform: rotateZ(45deg)skew(30deg,30deg);
  bottom: -12px;
  left: 43%;
  border-right: 2px solid ;
  border-bottom: 2px solid ;
  border-color: rgb(228, 159, 171);
}

/* ÂêéÂè∞ */

.back-star-tip {
  width: 9ch;
  top: -73px;
  right: -15px;
  border: 2px solid rgb(71, 217, 230);
  transform: rotateZ(30deg);
  transform-origin: center 112px;
  animation: swing-back 1s ease infinite 1s;
}
.back-star-tip::before {
  content: '';
  width: 20px;
  height: 20px;
  background: white;
  position: absolute;
  transform: rotateZ(45deg)skew(30deg,30deg);
  bottom: -12px;
  left: 43%;
  border-right: 2px solid ;
  border-bottom: 2px solid ;
  border-color: rgb(71, 217, 230);
}

/* ÂâçÁ´Ø */
.front-star-tip {
  width: 6ch;
  top: -53px;
  right: 40px;
  border: 2px solid rgb(225, 168, 113);
  transform: rotateZ(-30deg);
  transform-origin: center 52px;
  animation: scale-front infinite 1s ease 1s;
}
.front-star-tip::before {
  content: '';
  width: 20px;
  height: 20px;
  background: white;
  position: absolute;
  transform: rotateZ(45deg)skew(30deg,30deg);
  bottom: -12px;
  left: 43%;
  border-right: 2px solid ;
  border-bottom: 2px solid ;
  border-color: rgb(225, 168, 113);
}

/* Êï¥‰∏™ÁªÑ‰ª∂*/
/* ËÆæËÆ°*/
.design-show-enter,.design-show-leave-to {
  opacity: 0;
  transform: scale(0)rotateZ(-20deg);
}
.design-show-enter-to,.design-show-leave {
  opacity: 1;
  transform: scale(1)rotateZ(-20deg);
}
.design-show-enter-active,.design-show-leave-active {
  transition: opacity 0.5s ease 0.2s,
            transform 0.5s ease 0.2s,
}
/* ÂêéÂè∞ */
.back-show-enter,.back-show-leave-to {
  opacity: 0;
  transform: rotateZ(90deg);
}
.back-show-enter-to,.back-show-leave {
  opacity: 1;
  transform: rotateZ(30deg);
}
.back-show-enter-active,.back-show-leave-active {
  transition: opacity 0.5s ease 0.2s,
            transform 0.5s ease 0.2s,
}
/* ÂâçÁ´Ø */
.front-show-enter,.front-show-leave-to {
  transform: rotateZ(-30deg)rotateY(90deg);
}
.front-show-enter-to,.front-show-leave {
  transform: rotateZ(-30deg)rotateY(0);
}
.front-show-enter-active,.front-show-leave-active {
  transition: transform 0.5s ease 0.2s;
}
@keyframes scale-front {
  0% {
    transform: scale(1)rotateZ(-30deg);
  }
  25% {
    transform: scale(0.9)rotateZ(-30deg);
  }
  50% {
    transform: scale(1)rotateZ(-30deg);
  }
  75% {
    transform: scale(0.9)rotateZ(-30deg);
  }
  100% {
    transform: scale(1)rotateZ(-30deg);
  }
}
@keyframes swing-back {
  0% {
    transform: rotateZ(30deg);
  }
  25% {
    transform: rotateZ(28deg);
  }
  50% {
    transform: rotateZ(30deg);
  }
  75% {
    transform: rotateZ(32deg);
  }
  100% {
    transform: rotateZ(30deg);
  }
}
@keyframes jump-design {
  0% {
    transform: translate(0px,0px)rotateZ(-20deg);
  }
  25% {
    transform: translate(-1px,-3px)rotateZ(-20deg);
  }
  50% {
    transform: translate(0px,0px)rotateZ(-20deg);
  }
  75% {
    transform: translate(-1px,-3px)rotateZ(-20deg);
  }
  100% {
    transform: translate(0px,0px)rotateZ(-20deg);
  }
}
</style>
